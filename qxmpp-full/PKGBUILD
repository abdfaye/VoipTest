# Packager: hipersayan_x <hipersayan.x@gmail.com>

pkgrealname=qxmpp
pkgname=$pkgrealname-full
pkgver=0.4.0
pkgrel=1
pkgdesc="QXmpp is an xmpp client library based on Qt & C++ (version with Speex, Vpx and Theora support)"
arch=('i686' 'x86_64')
url="http://code.google.com/p/qxmpp/"
license=('LGPL2')
depends=('qt' 'speex' 'libvpx' 'libtheora')
provides=('qxmpp')
conflicts=('qxmpp' 'qxmpp-full-git' 'qxmpp-static-full-git')
source=(http://$pkgrealname.googlecode.com/files/$pkgrealname-$pkgver.tar.gz)
md5sums=('17c1d05b1dec3fe8507aae26e05074cb')

build() {
    curdir="$PWD"
    cp -f ../src.pro.patch "$srcdir/$pkgrealname-$pkgver"
    cp -f ../QXmppRtpChannel.cpp.patch "$srcdir/$pkgrealname-$pkgver"
    cd "$srcdir/$pkgrealname-$pkgver"
    patch -N -p0 < src.pro.patch
    patch -N -p0 < QXmppRtpChannel.cpp.patch
    qmake PREFIX=/usr
    make
    make INSTALL_ROOT="$pkgdir" install
}
